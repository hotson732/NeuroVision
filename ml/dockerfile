# Versi贸n simplificada sin Conda
FROM nvidia/cuda:12.2.0-runtime-ubuntu20.04

# Instalar Python y pip
RUN apt-get update && apt-get install -y \
    python3 \
    python3-pip \
    python3-venv \
    && rm -rf /var/lib/apt/lists/*

# Crear un directorio para la aplicaci贸n
WORKDIR /app

# Copiar requirements primero para cachear dependencias
COPY requirements.txt .

# Instalar dependencias de Python
RUN pip3 install --upgrade pip && \
    pip3 install -r requirements.txt

# Copiar el c贸digo de la aplicaci贸n
COPY . .

# Puerto para el servicio ML
EXPOSE 8000

# Comando por defecto
CMD ["python3", "main.py"]